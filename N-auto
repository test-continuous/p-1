function search_promotable {
    local base_path="k8s/envs/dv/usc1"  # Base path to start searching
    echo "Searching under: $API_URL/$project_name/browse/$base_path"

    # Get list of all app-* directories
    response=$(curl -s -H "Authorization: Bearer $AUTH_TOKEN" \
                      -H "Content-Type: application/json" \
                      "$API_URL/$project_name/browse/$base_path")

    # Check if response contains errors
    if echo "$response" | jq -e '.errors' > /dev/null; then
        echo "Base path does not exist: $base_path"
        return
    fi

    # Extract all directories (app-ids like app-1203, app-1753)
    app_dirs=($(echo "$response" | jq -r '.children.values[] | select(.directory == true) | .path.toString'))

    # Debug: Print extracted app directories
    echo "Found app directories: ${app_dirs[@]}"

    if [ ${#app_dirs[@]} -eq 0 ]; then
        echo "No app directories found under $base_path."
        return
    fi

    # Loop through all app-id directories
    for app_dir in "${app_dirs[@]}"; do
        promotable_path="$base_path/$app_dir/promotable"
        echo "Checking promotable folder: $promotable_path"

        # Fetch contents of promotable folder
        promo_response=$(curl -s -H "Authorization: Bearer $AUTH_TOKEN" \
                               -H "Content-Type: application/json" \
                               "$API_URL/$project_name/browse/$promotable_path")

        # Debug: Print promotable folder response
        echo "Promotable API Response: $promo_response"

        # If 'promotable' exists, check for matching subdirectories
        if ! echo "$promo_response" | jq -e '.errors' > /dev/null; then
            promo_subdirs=($(echo "$promo_response" | jq -r '.children.values[] | select(.directory == true) | .path.toString'))
            
            for promo_subdir in "${promo_subdirs[@]}"; do
                if [[ "$promo_subdir" =~ $pattern ]]; then
                    echo "Match found: $API_URL/$project_name/browse/$promotable_path/$promo_subdir"
                fi
            done
        else
            echo "No promotable folder found in $app_dir"
        fi
    done
}
